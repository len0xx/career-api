# Получение списка вакансий компании

Метод для получения всех существующих вакансии компании, к которой относится пользователь

При успешном выполнении вакансии возвращаются в виде массива объектов вакансий. Описание объекта можно посмотреть по ссылке — [vacancy](https://github.com/len0xx/career-api/blob/main/docs/vacancy.md)

### Для получения вакансии необходимо выполнить запрос:
```
POST /api/get-vacancies/
```

### В теле запроса необходимо передать следующие параметры:
* `client_id` — Идентификтор приложения (см. [регистрация приложения](https://xn--80adjbxl0aeb4ii6a.xn--p1ai/wp-admin/admin.php?page=apps))
* `client_secret` — Секретный код приложения (см. [регистрация приложения](https://xn--80adjbxl0aeb4ii6a.xn--p1ai/wp-admin/admin.php?page=apps))
* `access_token` — Токен доступа (см. [получение токена](https://github.com/len0xx/career-api/blob/main/docs/auth.md))

### Пример запроса
```javascript
{
    "client_id": 0,
    "client_secret": "b35ef4fe21294ac5",
    "access_token": "8248D5F9C68BF23F9C296D3B10119F01"
}
```

### Пример ответа:
```javascript
{
    "success": true,
    "vacancies": [
        {
            "id": 345678,
            "title": "Техник по настройке оборудования",
            "create_date": "2021-01-11 07:00:49",
            "min_salary": 41000,
            "max_salary": 60000,
            "categories": [
                {
                    "id": 51,
                    "title": "Информационные технологии, интернет, телеком"
                }
            ],
            "cities": [
                {
                    "id": 612,
                    "title": "Екатеринбург"
                }
            ],
            "regions": [
                {
                    "id": 763,
                    "title": "Свердловская область"
                }
            ],
            "company": {
                "id": 2743,
                "title": "Протек"
            },
            "description": "",
            "duties": "<p>• Проведение ремонтно-восстановительных и эксплуатационных работ на линиях связи и оборудовании клиентов (ПК, маршрутизаторы и пр.) в установленный регламентом срок и в соответствии с принятыми нормами эксплуатации объектов связи;<br \/>\n• Дежурства по заранее утвержденному графику.<\/p>\n",
            "employment": "full",
            "contact_email": "personal@itmh.ru",
            "contact_phone": "+7 (800) 755 70-00",
            "contact_fio": "Отдел персонала",
            "requirements": "<p>• Опыт аналогичной работы от 1 года;<br \/>\n• Уверенное владение контрольно-измерительными приборами для диагностики неисправностей на медных и оптических линиях связи;<br \/>\n• Знание модели OSI, технологии Ethernet, Wi-Fi, сетевых настроек различных операционных систем;<br \/>\n• Обязательно понимание принципов и особенностей работы сервисов: DNS, VPN, HTTP, SMTP, IMAP, POP3;<br \/>\n• Умение настраивать маршрутизаторы различных производителей;<br \/>\n• Владение технологией монтажа UTP (желательно ВОК).<\/p>\n",
            "working_conditions": "<p>• Четкая и прозрачная система мотивации: оклад + KPI. На испытательный срок заработная плата 35 000 руб., после испытательного срока доход от 41 000 руб. + компенсация ГСМ и амортизации автомобиля. Дополнительно оплачиваются сверхурочные работы и дежурства.<br \/>\n• График работы: 5\/2, 10.00 -19.00, присутствуют дежурства по заранее установленному графику;<br \/>\n• Разъездной характер работ;<br \/>\n• Предоставляется рабочая одежда и все необходимые инструменты, материалы.<\/p>\n"
        },
        {
            "id": 15347,
            "title": "Оператор call-центра (удаленно)",
            "create_date": "2020-12-23 15:31:03",
            "min_salary": 20000,
            "max_salary": 25000,
            "categories": [
                {
                    "id": 1,
                    "title": "Без рубрики"
                }
            ],
            "cities": [
                {
                    "id": 615,
                    "title": "Челябинск"
                }
            ],
            "regions": [
                {
                    "id": 775,
                    "title": "Челябинская область"
                }
            ],
            "description": "<p><strong>Вы позитивны, энергичны и любите общаться с людьми?<\/strong><\/p> <p><strong>Вам нужна стабильность и уверенность в завтрашнем дне?<\/strong><\/p> <p><strong>Сотрудник call-центра – это голос компании и им можете стать именно Вы!<\/strong><\/p> <p><strong>Чем Вам предстоит заниматься:<\/strong><\/p> <ul> <li>Принимать звонки и консультировать клиентов сервисов «ЗдравСити» и «Моё здоровье»<\/li> <li>Регистрировать заказы<\/li> <li>Совершать исходящие звонки (аптеки-партнеры и клиенты сервиса «ЗдравСити»)<\/li> <li>Взаимодействовать с сотрудниками смежных подразделений<\/li> <\/ul> <p><strong>Эта вакансия для Вас, если Вы:<\/strong><\/p> <ul> <li>Обладаете грамотной речью<\/li> <li>Готовы работать в режиме многозадачности и многофункциональности<\/li> <li>Можете работать на дому (есть компьютер, интернет и гарнитура)<\/li> <\/ul> <p><strong>Мы предлагаем Вам:<\/strong><\/p> <ul> <li>График работы 2\/2 с 9.00 до 21.00<\/li> <li>Интересные и масштабные задачи в стабильной, быстроразвивающейся компании<\/li> <li>Привлекательную заработную плату<\/li> <li>Заботу о вашем здоровье: ДМС страхование, скидки на медицинскую продукцию для вас и ваших близких.<\/li> <li>Сильную и дружную команду профессионалов, готовых делиться опытом<\/li> <li>Поддержку на старте, у вас будет наставник, который поможет влиться в работу<\/li> <li>Демократичное общение с руководителями, которые поощряют вашу инициативу<\/li> <li>Индивидуальную систему обучения<\/li> <li>Планирование карьеры —сотрудники компании имеют возможность профессионального и карьерного развития<\/li> <li>Насыщенную корпоративную жизнь, Вы сможете участвовать в тематических праздниках, а также присоединиться к спортивному движению<\/li> <\/ul> <p><strong>Присоединяйтесь к команде «ПРОТЕК» и перед Вами откроется мир профессиональных возможностей, интересных задач и ярких достижений!<\/strong><\/p> <p> <\/p>",
            "employment": "full"
        }
    ]
}
```

## Ошибки

В случае ошибки будет выдан соответствующий ответ с описанием проблемы. Например:
```javascript
{
    "success": false,
    "error": "invalid vacancy_id"
}
```
Такой ответ говорит о том, что вакансия с таким `vacancy_id` не существует

### Возможные ошибки
* `empty request` — получено пустое тело запроса
* `insufficient arguments passed` — не передан хотя бы один из обязательных параметров
* `invalid client_id` — передан несуществующий `client_id`
* `wrong client_secret` — передан некорректный `client_secret` (неподходящий для переданного `client_id`)
* `the fields title and description are required` — пустое или отсутствующее значение полей `title` или `description`
* `invalid access_token` — передан несуществующий `access_token`
* `the access_token has already expired` — срок жизни токена истёк
* `this access_token is no longer available` — существует более новый токен для этого пользователя
* `account with such account_id does not exist` — пользователя с таким `id` (привязанным к `access_token`) не существует
* `invalid city` — передан некорректное название города
* `invalid company` — компании, с которой связан пользователь не существует
* `invalid scope for this method` — у переданного токена нет доступа к этому методу
* `could not create the vacancy` — во время создания вакансии на сервере произошла непредвиденная ошибка, попробуйте повторить запрос позднее
